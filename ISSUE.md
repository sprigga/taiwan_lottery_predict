# æ™ºèƒ½é¸è™ŸåŠŸèƒ½å•é¡Œä¿®å¾©è¨˜éŒ„

## å•é¡Œæè¿°

### ä¸»è¦å•é¡Œ
åœ¨ `frontend/src/views/Home.vue` ä¸­ï¼Œç”¨æˆ¶é»æ“Šã€Œæ™ºèƒ½é¸è™Ÿã€æŒ‰éˆ•å¾Œç„¡æ³•é¡¯ç¤ºå…©çµ„æ¨è–¦è™Ÿç¢¼ã€‚

### å•é¡Œç¾è±¡
- å¾Œç«¯ API èª¿ç”¨æˆåŠŸï¼Œè¿”å›ç‹€æ…‹ç‚º `success`
- å‰ç«¯æ”¶åˆ°å›æ‡‰ï¼Œä½† `recommended_sets` æ¬„ä½ç‚ºç©ºæˆ–ä¸å­˜åœ¨
- ç”¨æˆ¶ç„¡æ³•çœ‹åˆ° AI æ¨è–¦çš„å…©çµ„å¤§æ¨‚é€è™Ÿç¢¼

## å•é¡Œåˆ†æ

### æ ¹æœ¬åŸå› åˆ†æ
é€šéæ·±å…¥èª¿æŸ¥ç™¼ç¾äº†ä¸‰å€‹ä¸»è¦å•é¡Œï¼š

1. **æ­£å‰‡è¡¨é”å¼åŒ¹é…å¤±æ•—**
   - `backend/main.py` ä¸­çš„ `parse_ai_prediction` å‡½å¼ç„¡æ³•æ­£ç¢ºè§£æ AI å›æ‡‰
   - åŸå§‹æ­£å‰‡è¡¨é”å¼æœŸæœ›çš„æ ¼å¼èˆ‡ AI å¯¦éš›è¿”å›çš„æ ¼å¼ä¸åŒ¹é…

2. **Pydantic æ¨¡å‹æ¬ ç¼ºæ¬„ä½**
   - `PredictionResponse` æ¨¡å‹ç¼ºå°‘ `recommended_sets` æ¬„ä½
   - FastAPI çš„ Pydantic é©—è­‰æœƒéæ¿¾æ‰æ¨¡å‹ä¸­æœªå®šç¾©çš„æ¬„ä½

3. **AI å›æ‡‰æ ¼å¼è®ŠåŒ–**
   - AI ä½¿ç”¨ Markdown æ ¼å¼å›æ‡‰ï¼Œèˆ‡é æœŸçš„ç´”æ–‡å­—æ ¼å¼ä¸åŒ
   - å¯¦éš›æ ¼å¼ï¼š`**å½©åˆ¸è™Ÿç¢¼:** [12, 30, 44, 18, 38, 19] + **ç‰¹åˆ¥è™Ÿ:** 4`
   - é æœŸæ ¼å¼ï¼š`ç¬¬ä¸€çµ„(å†·é–€è™Ÿç¢¼çµ„åˆ): [12, 30, 44, 18, 38, 19] + ç‰¹åˆ¥è™Ÿ: 4`

## è©³ç´°å•é¡Œè¿½è¹¤

### å•é¡Œ 1: æ­£å‰‡è¡¨é”å¼åŒ¹é…å¤±æ•—

**å•é¡Œä½ç½®**: `backend/main.py` ç¬¬ 52-106 è¡Œçš„ `parse_ai_prediction` å‡½å¼

**åŸå§‹ä»£ç¢¼å•é¡Œ**:
```python
# åŸå§‹æ­£å‰‡è¡¨é”å¼åªèƒ½åŒ¹é…ç‰¹å®šæ ¼å¼
pattern = r'\*\*ç¬¬[ä¸€äºŒ]çµ„\(([^)]+)\):\*\*\s*\[(\d+(?:,\s*\d+){5})\]\s*\+\s*ç‰¹åˆ¥è™Ÿ:\s*(\d+)'
```

**å¯¦éš› AI å›æ‡‰æ ¼å¼**:
```text
**å½©åˆ¸è™Ÿç¢¼:** [12, 28, 30, 36, 38, 44] + **ç‰¹åˆ¥è™Ÿ:** 42
```

**è§£æ±ºæ–¹æ¡ˆ**:
- æ–°å¢ Markdown æ ¼å¼çš„æ­£å‰‡è¡¨é”å¼åŒ¹é…
- å¢å¼·è™Ÿç¢¼è§£æé‚è¼¯ï¼Œæ”¯æ´å¤šç¨®åˆ†éš”ç¬¦ï¼ˆé€—è™Ÿã€ä¸­æ–‡é€—è™Ÿã€é “è™Ÿã€ç©ºæ ¼ï¼‰
- æ·»åŠ å¤šå±¤æ¬¡çš„åŒ¹é…ç­–ç•¥

### å•é¡Œ 2: Pydantic æ¨¡å‹æ¬ ç¼ºæ¬„ä½

**å•é¡Œä½ç½®**: `backend/main.py` ç¬¬ 39-43 è¡Œçš„ `PredictionResponse` é¡åˆ¥

**åŸå§‹ä»£ç¢¼**:
```python
class PredictionResponse(BaseModel):
    status: str
    data: Optional[Dict[str, Any]] = None
    ai_prediction: Optional[str] = None
    error: Optional[str] = None
    # ç¼ºå°‘ recommended_sets æ¬„ä½
```

**å•é¡Œç¾è±¡**:
- å¾Œç«¯æ—¥èªŒé¡¯ç¤º `recommended_sets` è¢«æˆåŠŸæ·»åŠ åˆ°å›æ‡‰ä¸­
- ä½† API å¯¦éš›å›æ‡‰ä¸­è©²æ¬„ä½è¢« FastAPI éæ¿¾æ‰

**è§£æ±ºæ–¹æ¡ˆ**:
```python
class PredictionResponse(BaseModel):
    status: str
    data: Optional[Dict[str, Any]] = None
    ai_prediction: Optional[str] = None
    recommended_sets: Optional[List[Dict[str, Any]]] = None  # âœ… æ–°å¢æ­¤æ¬„ä½
    error: Optional[str] = None
```

### å•é¡Œ 3: AI å›æ‡‰æ ¼å¼ä¸ä¸€è‡´

**å•é¡Œä¾†æº**: `Lottery_predict.py` ä¸­çš„æç¤ºè©èˆ‡ AI å¯¦éš›å›æ‡‰æ ¼å¼ä¸åŒ¹é…

**æç¤ºè©æœŸæœ›æ ¼å¼** (ç¬¬ 133-138 è¡Œ):
```text
ç¬¬ä¸€çµ„(å†·é–€è™Ÿç¢¼çµ„åˆ): [è™Ÿç¢¼1, è™Ÿç¢¼2, è™Ÿç¢¼3, è™Ÿç¢¼4, è™Ÿç¢¼5, è™Ÿç¢¼6] + ç‰¹åˆ¥è™Ÿ: è™Ÿç¢¼
ç¬¬äºŒçµ„(ç†±é–€è™Ÿç¢¼çµ„åˆ): [è™Ÿç¢¼1, è™Ÿç¢¼2, è™Ÿç¢¼3, è™Ÿç¢¼4, è™Ÿç¢¼5, è™Ÿç¢¼6] + ç‰¹åˆ¥è™Ÿ: è™Ÿç¢¼
```

**AI å¯¦éš›å›æ‡‰æ ¼å¼**:
```text
**å½©åˆ¸è™Ÿç¢¼:** [12, 28, 30, 36, 38, 44] + **ç‰¹åˆ¥è™Ÿ:** 42
```

## è§£æ±ºæ–¹æ¡ˆå¯¦æ–½

### 1. æ›´æ–° Pydantic æ¨¡å‹

**æª”æ¡ˆ**: `backend/main.py`
**ä¿®æ”¹å…§å®¹**:
```python
class PredictionResponse(BaseModel):
    status: str
    data: Optional[Dict[str, Any]] = None
    ai_prediction: Optional[str] = None
    recommended_sets: Optional[List[Dict[str, Any]]] = None  # æ–°å¢æ¬„ä½
    error: Optional[str] = None
```

### 2. å¢å¼·æ­£å‰‡è¡¨é”å¼åŒ¹é…é‚è¼¯

**æª”æ¡ˆ**: `backend/main.py`
**ä¿®æ”¹å…§å®¹**: å®Œå…¨é‡å¯« `parse_ai_prediction` å‡½å¼

**æ–°å¢åŠŸèƒ½**:
- æ”¯æ´åŸå§‹æ ¼å¼åŒ¹é…
- æ”¯æ´ Markdown æ ¼å¼åŒ¹é…
- æ”¯æ´å¤šç¨®åˆ†éš”ç¬¦ï¼ˆ`,`ã€`ï¼Œ`ã€`ã€`ã€ç©ºæ ¼ï¼‰
- å¤šå±¤æ¬¡åŒ¹é…ç­–ç•¥ï¼Œæé«˜è§£ææˆåŠŸç‡

**é—œéµæ”¹é€²**:
```python
# æ–°å¢ Markdown æ ¼å¼åŒ¹é…
markdown_pattern = r'\*\*å½©åˆ¸è™Ÿç¢¼:\*\*\s*\[([^\]]+)\]\s*\+\s*\*\*ç‰¹åˆ¥è™Ÿ:\*\*\s*(\d+)'
markdown_matches = re.findall(markdown_pattern, ai_prediction_text)

# å¢å¼·è™Ÿç¢¼è§£æé‚è¼¯
numbers_str = re.sub(r'[^\d,ï¼Œã€\s]', '', numbers_str)  # ç§»é™¤éæ•¸å­—ã€é€—è™Ÿã€ç©ºæ ¼çš„å­—ç¬¦
regular_numbers = []
for num_str in re.split(r'[,ï¼Œã€\s]+', numbers_str):
    if num_str.strip().isdigit():
        regular_numbers.append(int(num_str.strip()))
```

### 3. æ¸¬è©¦é©—è­‰

**æ¸¬è©¦æ–¹æ³•**:
1. å‰µå»ºç¨ç«‹æ¸¬è©¦è…³æœ¬é©—è­‰æ­£å‰‡è¡¨é”å¼
2. é‡å•Ÿå¾Œç«¯æœå‹™
3. èª¿ç”¨ API ç«¯é»é©—è­‰å›æ‡‰æ ¼å¼
4. æª¢æŸ¥å‰ç«¯é¡¯ç¤ºæ•ˆæœ

**æ¸¬è©¦çµæœ**:
```json
{
  "status": "success",
  "recommended_sets": [
    {
      "type": "å†·é–€è™Ÿç¢¼çµ„åˆ",
      "regular_numbers": [12, 30, 44, 18, 38, 19],
      "special_number": 4,
      "reason": "åŸºæ–¼æ­·å²è³‡æ–™åˆ†æçš„å†·é–€è™Ÿç¢¼çµ„åˆ"
    },
    {
      "type": "ç†±é–€è™Ÿç¢¼çµ„åˆ", 
      "regular_numbers": [2, 15, 20, 25, 45, 49],
      "special_number": 10,
      "reason": "åŸºæ–¼æ­·å²è³‡æ–™åˆ†æçš„ç†±é–€è™Ÿç¢¼çµ„åˆ"
    }
  ]
}
```

## ä¿®å¾©é©—è­‰

### å¾Œç«¯é©—è­‰
âœ… API ç«¯é» `/api/lotto649/predict` æˆåŠŸè¿”å› `recommended_sets`
âœ… æ­£å‰‡è¡¨é”å¼æˆåŠŸè§£æ AI å›æ‡‰ä¸­çš„å…©çµ„è™Ÿç¢¼
âœ… Pydantic æ¨¡å‹æ­£ç¢ºåºåˆ—åŒ–å›æ‡‰æ•¸æ“š

### å‰ç«¯é©—è­‰
âœ… `Home.vue` ä¸­çš„æ™ºèƒ½é¸è™ŸæŒ‰éˆ•åŠŸèƒ½æ­£å¸¸
âœ… æ¨è–¦è™Ÿç¢¼æ­£ç¢ºé¡¯ç¤ºåœ¨å‰ç«¯ä»‹é¢
âœ… ç”¨æˆ¶é«”é©—å¾—åˆ°æ”¹å–„

## æŠ€è¡“æ”¹é€²é»

### 1. éŒ¯èª¤è™•ç†å¢å¼·
- æ·»åŠ å¤šå±¤æ¬¡çš„æ­£å‰‡è¡¨é”å¼åŒ¹é…
- æé«˜å°ä¸åŒ AI å›æ‡‰æ ¼å¼çš„å®¹éŒ¯æ€§

### 2. ä»£ç¢¼å¯ç¶­è­·æ€§
- æ¸…æ™°çš„è¨»é‡‹èªªæ˜å„ç¨®åŒ¹é…æ¨¡å¼
- æ¨¡çµ„åŒ–çš„è™Ÿç¢¼è§£æé‚è¼¯

### 3. ç³»çµ±ç©©å®šæ€§
- æ”¯æ´å¤šç¨®åˆ†éš”ç¬¦æ ¼å¼
- å‘å¾Œå…¼å®¹åŸæœ‰æ ¼å¼

## é é˜²æªæ–½

### 1. æç¤ºè©å„ªåŒ–å»ºè­°
è€ƒæ…®æ›´æ–° `Lottery_predict.py` ä¸­çš„æç¤ºè©ï¼Œæ˜ç¢ºæŒ‡å®šå›æ‡‰æ ¼å¼ï¼š
```python
prompt = f"""
è«‹åš´æ ¼æŒ‰ç…§ä»¥ä¸‹æ ¼å¼å›ç­”ï¼š
ç¬¬ä¸€çµ„(å†·é–€è™Ÿç¢¼çµ„åˆ): [è™Ÿç¢¼1, è™Ÿç¢¼2, è™Ÿç¢¼3, è™Ÿç¢¼4, è™Ÿç¢¼5, è™Ÿç¢¼6] + ç‰¹åˆ¥è™Ÿ: è™Ÿç¢¼
ç¬¬äºŒçµ„(ç†±é–€è™Ÿç¢¼çµ„åˆ): [è™Ÿç¢¼1, è™Ÿç¢¼2, è™Ÿç¢¼3, è™Ÿç¢¼4, è™Ÿç¢¼5, è™Ÿç¢¼6] + ç‰¹åˆ¥è™Ÿ: è™Ÿç¢¼
"""
```

### 2. æ¸¬è©¦è¦†è“‹ç‡
å»ºè­°æ·»åŠ å–®å…ƒæ¸¬è©¦ä¾†é©—è­‰ `parse_ai_prediction` å‡½å¼å°å„ç¨®æ ¼å¼çš„è™•ç†èƒ½åŠ›ã€‚

### 3. ç›£æ§æ©Ÿåˆ¶
å»ºè­°æ·»åŠ æ—¥èªŒè¨˜éŒ„ï¼Œç•¶æ­£å‰‡è¡¨é”å¼åŒ¹é…å¤±æ•—æ™‚è¨˜éŒ„ AI å›æ‡‰å…§å®¹ï¼Œä¾¿æ–¼å¾ŒçºŒåˆ†æå’Œæ”¹é€²ã€‚

## ç›¸é—œæª”æ¡ˆ

### ä¿®æ”¹çš„æª”æ¡ˆ
- `backend/main.py` - ä¸»è¦ä¿®å¾©æª”æ¡ˆ
  - æ›´æ–° `PredictionResponse` æ¨¡å‹
  - é‡å¯« `parse_ai_prediction` å‡½å¼

### ç›¸é—œæª”æ¡ˆ
- `frontend/src/views/Home.vue` - å‰ç«¯é¡¯ç¤ºé‚è¼¯
- `Lottery_predict.py` - AI æç¤ºè©å®šç¾©

## ç¸½çµ

é€™æ¬¡å•é¡Œä¿®å¾©æ¶‰åŠäº†å‰å¾Œç«¯å”ä½œã€æ­£å‰‡è¡¨é”å¼è™•ç†ã€API è¨­è¨ˆç­‰å¤šå€‹æŠ€è¡“å±¤é¢ã€‚é€šéç³»çµ±æ€§çš„å•é¡Œåˆ†æå’Œé€æ­¥é©—è­‰ï¼ŒæˆåŠŸè§£æ±ºäº†æ™ºèƒ½é¸è™ŸåŠŸèƒ½ç„¡æ³•é¡¯ç¤ºæ¨è–¦è™Ÿç¢¼çš„å•é¡Œï¼Œæå‡äº†ç”¨æˆ¶é«”é©—å’Œç³»çµ±ç©©å®šæ€§ã€‚

**ä¿®å¾©æ™‚é–“**: 2025å¹´1æœˆ
**å½±éŸ¿ç¯„åœ**: æ™ºèƒ½é¸è™ŸåŠŸèƒ½
**ä¿®å¾©ç‹€æ…‹**: âœ… å·²å®Œæˆä¸¦é©—è­‰

---

# å¤§æ¨‚é€æ­·å²è³‡æ–™ API é©—è­‰éŒ¯èª¤ä¿®å¾©è¨˜éŒ„

## å•é¡Œæè¿°

### ä¸»è¦å•é¡Œ
åœ¨æ¸¬è©¦ `/api/lotto649?year=2025&month=08` API ç«¯é»æ™‚ï¼Œå‡ºç¾ HTTP 500 å…§éƒ¨ä¼ºæœå™¨éŒ¯èª¤ã€‚

### å•é¡Œç¾è±¡
- API èª¿ç”¨è¿”å› `Internal Server Error`
- å¾Œç«¯æ—¥èªŒé¡¯ç¤º `ResponseValidationError`
- 9å€‹é©—è­‰éŒ¯èª¤ï¼Œå…¨éƒ¨æŒ‡å‘ `æœŸåˆ¥` æ¬„ä½é¡å‹ä¸åŒ¹é…

## å•é¡Œåˆ†æ

### æ ¹æœ¬åŸå› 
**Pydantic æ¨¡å‹æ•¸æ“šé¡å‹å®šç¾©éŒ¯èª¤**ï¼š`LotteryData` æ¨¡å‹ä¸­çš„ `æœŸåˆ¥` æ¬„ä½è¢«å®šç¾©ç‚º `str` é¡å‹ï¼Œä½†å¯¦éš›æ•¸æ“šä¸­çš„ `æœŸåˆ¥` æ˜¯ `int` é¡å‹ã€‚

### éŒ¯èª¤è©³æƒ…
```
ResponseValidationError: 9 validation errors:
{'type': 'string_type', 'loc': ('response', 0, 'æœŸåˆ¥'), 'msg': 'Input should be a valid string', 'input': 114000083}
{'type': 'string_type', 'loc': ('response', 1, 'æœŸåˆ¥'), 'msg': 'Input should be a valid string', 'input': 114000082}
...
```

### å•é¡Œä½ç½®
**æª”æ¡ˆ**: `backend/main.py` ç¬¬ 33-37 è¡Œ

**åŸå§‹éŒ¯èª¤ä»£ç¢¼**:
```python
class LotteryData(BaseModel):
    æœŸåˆ¥: str  # âŒ éŒ¯èª¤ï¼šå¯¦éš›æ•¸æ“šæ˜¯æ•´æ•¸é¡å‹
    é–‹çæ—¥æœŸ: str
    çè™Ÿ: List[int]
    ç‰¹åˆ¥è™Ÿ: int
```

**å¯¦éš›æ•¸æ“šæ ¼å¼**:
```json
{
  "æœŸåˆ¥": 114000083,  // æ•´æ•¸é¡å‹ï¼Œä¸æ˜¯å­—ç¬¦ä¸²
  "é–‹çæ—¥æœŸ": "2025-08-29T00:00:00",
  "çè™Ÿ": [13, 20, 25, 27, 28, 32],
  "ç‰¹åˆ¥è™Ÿ": 2
}
```

## è§£æ±ºæ–¹æ¡ˆå¯¦æ–½

### ä¿®å¾©æ–¹æ³•
æ›´æ–° `LotteryData` æ¨¡å‹ä¸­çš„ `æœŸåˆ¥` æ¬„ä½é¡å‹å®šç¾©ï¼š

**ä¿®å¾©å¾Œä»£ç¢¼**:
```python
class LotteryData(BaseModel):
    æœŸåˆ¥: int  # âœ… ä¿®æ­£ï¼šæ”¹ç‚ºæ•´æ•¸é¡å‹
    é–‹çæ—¥æœŸ: str
    çè™Ÿ: List[int]
    ç‰¹åˆ¥è™Ÿ: int
```

### ä¿®å¾©æ­¥é©Ÿ
1. **è­˜åˆ¥å•é¡Œ**ï¼šåˆ†æå¾Œç«¯éŒ¯èª¤æ—¥èªŒï¼Œç™¼ç¾ Pydantic é©—è­‰éŒ¯èª¤
2. **å®šä½åŸå› **ï¼šæª¢æŸ¥æ¨¡å‹å®šç¾©èˆ‡å¯¦éš›æ•¸æ“šé¡å‹çš„ä¸åŒ¹é…
3. **å¯¦æ–½ä¿®å¾©**ï¼šä¿®æ”¹ `æœŸåˆ¥` æ¬„ä½é¡å‹å¾ `str` åˆ° `int`
4. **é‡å•Ÿæœå‹™**ï¼šé‡æ–°å•Ÿå‹•å¾Œç«¯ä¼ºæœå™¨
5. **é©—è­‰ä¿®å¾©**ï¼šæ¸¬è©¦ API ç«¯é»ç¢ºèªæ­£å¸¸é‹ä½œ

## ä¿®å¾©é©—è­‰

### æ¸¬è©¦å‘½ä»¤
```bash
curl -X 'GET' 'http://localhost:8000/api/lotto649?year=2025&month=08' -H 'accept: application/json'
```

### ä¿®å¾©å‰çµæœ
```
HTTP 500 Internal Server Error
```

### ä¿®å¾©å¾Œçµæœ
```json
[
  {
    "æœŸåˆ¥": 114000083,
    "é–‹çæ—¥æœŸ": "2025-08-29T00:00:00",
    "çè™Ÿ": [13, 20, 25, 27, 28, 32],
    "ç‰¹åˆ¥è™Ÿ": 2
  },
  {
    "æœŸåˆ¥": 114000082,
    "é–‹çæ—¥æœŸ": "2025-08-26T00:00:00",
    "çè™Ÿ": [3, 6, 22, 32, 35, 39],
    "ç‰¹åˆ¥è™Ÿ": 27
  }
  // ... æ›´å¤šè³‡æ–™
]
```

## æŠ€è¡“åˆ†æ

### å•é¡Œé¡å‹
**æ•¸æ“šé¡å‹ä¸åŒ¹é…éŒ¯èª¤** - é€™æ˜¯ä¸€å€‹å…¸å‹çš„ API é–‹ç™¼ä¸­å¸¸è¦‹çš„å•é¡Œï¼Œç•¶æ¨¡å‹å®šç¾©èˆ‡å¯¦éš›æ•¸æ“šçµæ§‹ä¸ç¬¦æ™‚ç™¼ç”Ÿã€‚

### å½±éŸ¿ç¯„åœ
- `/api/lotto649` ç«¯é»çš„æ‰€æœ‰æŸ¥è©¢
- å¯èƒ½å½±éŸ¿å…¶ä»–ä½¿ç”¨ `LotteryData` æ¨¡å‹çš„ç«¯é»

### å­¸ç¿’è¦é»
1. **Pydantic é©—è­‰çš„é‡è¦æ€§**ï¼šåš´æ ¼çš„é¡å‹æª¢æŸ¥æœ‰åŠ©æ–¼ç™¼ç¾æ•¸æ“šä¸ä¸€è‡´å•é¡Œ
2. **æ¨¡å‹è¨­è¨ˆåŸå‰‡**ï¼šæ¨¡å‹å®šç¾©æ‡‰è©²èˆ‡å¯¦éš›æ•¸æ“šçµæ§‹å®Œå…¨åŒ¹é…
3. **éŒ¯èª¤æ—¥èªŒåˆ†æ**ï¼šè©³ç´°çš„éŒ¯èª¤è¨Šæ¯æœ‰åŠ©æ–¼å¿«é€Ÿå®šä½å•é¡Œ

## é é˜²æªæ–½

### 1. æ•¸æ“šé¡å‹æª¢æŸ¥
å»ºè­°åœ¨é–‹ç™¼éç¨‹ä¸­ï¼š
- æª¢æŸ¥å¯¦éš›æ•¸æ“šçµæ§‹èˆ‡æ¨¡å‹å®šç¾©çš„ä¸€è‡´æ€§
- ä½¿ç”¨è‡ªå‹•åŒ–æ¸¬è©¦é©—è­‰ API å›æ‡‰æ ¼å¼

### 2. æ¨¡å‹é©—è­‰æ¸¬è©¦
```python
# å»ºè­°æ·»åŠ çš„æ¸¬è©¦æ¡ˆä¾‹
def test_lottery_data_model():
    sample_data = {
        "æœŸåˆ¥": 114000083,  # ç¢ºä¿ä½¿ç”¨æ­£ç¢ºçš„æ•¸æ“šé¡å‹
        "é–‹çæ—¥æœŸ": "2025-08-29T00:00:00",
        "çè™Ÿ": [13, 20, 25, 27, 28, 32],
        "ç‰¹åˆ¥è™Ÿ": 2
    }
    lottery_data = LotteryData(**sample_data)
    assert lottery_data.æœŸåˆ¥ == 114000083
```

### 3. API æ–‡æª”æ›´æ–°
ç¢ºä¿ API æ–‡æª”ä¸­çš„æ•¸æ“šé¡å‹å®šç¾©èˆ‡å¯¦éš›å¯¦ä½œä¸€è‡´ã€‚

## ç›¸é—œæª”æ¡ˆ

### ä¿®æ”¹çš„æª”æ¡ˆ
- `backend/main.py` - æ›´æ–° `LotteryData` æ¨¡å‹å®šç¾©

### å½±éŸ¿çš„ API ç«¯é»
- `GET /api/lotto649` - å¤§æ¨‚é€æ­·å²è³‡æ–™æŸ¥è©¢

## ç¸½çµ

é€™æ¬¡ä¿®å¾©è§£æ±ºäº†ä¸€å€‹åŸºç¤ä½†é‡è¦çš„æ•¸æ“šé¡å‹ä¸åŒ¹é…å•é¡Œã€‚é€šéä¿®æ­£ Pydantic æ¨¡å‹å®šç¾©ï¼Œç¢ºä¿äº† API çš„æ­£å¸¸é‹ä½œå’Œæ•¸æ“šçš„æ­£ç¢ºé©—è­‰ã€‚é€™å€‹å•é¡Œæé†’æˆ‘å€‘åœ¨ API é–‹ç™¼ä¸­ï¼Œæ¨¡å‹å®šç¾©çš„æº–ç¢ºæ€§å°ç³»çµ±ç©©å®šæ€§çš„é‡è¦æ€§ã€‚

**ä¿®å¾©æ™‚é–“**: 2025å¹´1æœˆ
**å½±éŸ¿ç¯„åœ**: å¤§æ¨‚é€æ­·å²è³‡æ–™ API
**ä¿®å¾©ç‹€æ…‹**: âœ… å·²å®Œæˆä¸¦é©—è­‰

---

# é–‹ç™¼ç’°å¢ƒå•Ÿå‹•å•é¡Œä¿®å¾©è¨˜éŒ„

## å•é¡Œæè¿°

### ä¸»è¦å•é¡Œ
åœ¨åŸ·è¡Œ `./start_dev.sh` å•Ÿå‹•é–‹ç™¼ç’°å¢ƒæ™‚é‡åˆ°å¤šå€‹å•é¡Œï¼Œå°è‡´ç³»çµ±ç„¡æ³•æ­£å¸¸å•Ÿå‹•ã€‚

### å•é¡Œç¾è±¡
1. **pip å‘½ä»¤æœªæ‰¾åˆ°éŒ¯èª¤**ï¼š`./start_dev.sh: line 9: pip: command not found`
2. **Port 8000 ä½”ç”¨éŒ¯èª¤**ï¼š`ERROR: [Errno 98] error while attempting to bind on address ('0.0.0.0', 8000): address already in use`
3. **Python å¤–éƒ¨ç®¡ç†ç’°å¢ƒéŒ¯èª¤**ï¼š`error: externally-managed-environment`
4. **Port 3000 ä½”ç”¨**ï¼šVite è‡ªå‹•åˆ‡æ›åˆ° port 3001

## å•é¡Œåˆ†æ

### æ ¹æœ¬åŸå› åˆ†æ
1. **pip å‘½ä»¤å•é¡Œ**
   - ç³»çµ±ä½¿ç”¨ Homebrew ç®¡ç†çš„ Pythonï¼Œpip éœ€è¦é€šé `python3 -m pip` èª¿ç”¨
   - ç›´æ¥ä½¿ç”¨ `pip` å‘½ä»¤åœ¨ PATH ä¸­æ‰¾ä¸åˆ°

2. **å¤–éƒ¨ç®¡ç†ç’°å¢ƒé™åˆ¶**
   - Python ç’°å¢ƒè¢«æ¨™è¨˜ç‚ºå¤–éƒ¨ç®¡ç†ï¼ˆPEP 668ï¼‰
   - ç¦æ­¢ç›´æ¥å‘ç³»çµ± Python å®‰è£å¥—ä»¶ï¼Œéœ€è¦ä½¿ç”¨è™›æ“¬ç’°å¢ƒ

3. **Port è¡çªå•é¡Œ**
   - ä¹‹å‰é‹è¡Œçš„æœå‹™æœªæ­£ç¢ºåœæ­¢ï¼Œä½”ç”¨äº† 8000 å’Œ 3000 ç«¯å£
   - å¤šæ¬¡å•Ÿå‹•è…³æœ¬å°è‡´é€²ç¨‹é‡è¤‡

### è©³ç´°å•é¡Œè¿½è¹¤

#### å•é¡Œ 1: pip å‘½ä»¤æœªæ‰¾åˆ°
**éŒ¯èª¤è¨Šæ¯**:
```bash
./start_dev.sh: line 9: pip: command not found
```

**åŸå› **:
- Homebrew å®‰è£çš„ Python ç’°å¢ƒä¸­ï¼Œpip ä¸åœ¨ç³»çµ± PATH ä¸­
- éœ€è¦ä½¿ç”¨ `python3 -m pip` æ–¹å¼èª¿ç”¨

**è§£æ±ºæ–¹æ¡ˆ**:
ä¿®æ”¹ `start_dev.sh` ä¸­çš„å®‰è£å‘½ä»¤ï¼š
```bash
# åŸå§‹éŒ¯èª¤ä»£ç¢¼
pip install -r requirements.txt

# ä¿®å¾©å¾Œä»£ç¢¼
python3 -m pip install -r requirements.txt
```

#### å•é¡Œ 2: å¤–éƒ¨ç®¡ç†ç’°å¢ƒéŒ¯èª¤
**éŒ¯èª¤è¨Šæ¯**:
```bash
error: externally-managed-environment

Ã— This environment is externally managed
â•°â”€> To install Python packages system-wide, try brew install
```

**åŸå› **:
- Python ç’°å¢ƒéµå¾ª PEP 668 æ¨™æº–ï¼Œç¦æ­¢ç›´æ¥å‘ç³»çµ±å®‰è£å¥—ä»¶
- éœ€è¦ä½¿ç”¨è™›æ“¬ç’°å¢ƒéš”é›¢å¥—ä»¶ä¾è³´

**è§£æ±ºæ–¹æ¡ˆ**:
1. å‰µå»ºè™›æ“¬ç’°å¢ƒï¼š
```bash
python3 -m venv venv
```

2. ä¿®æ”¹ `start_dev.sh` ä½¿ç”¨è™›æ“¬ç’°å¢ƒï¼š
```bash
# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
source venv/bin/activate

# åœ¨è™›æ“¬ç’°å¢ƒä¸­å®‰è£ä¾è³´
pip install -r requirements.txt
```

#### å•é¡Œ 3: Port ä½”ç”¨å•é¡Œ
**éŒ¯èª¤è¨Šæ¯**:
```bash
ERROR: [Errno 98] error while attempting to bind on address ('0.0.0.0', 8000): address already in use
```

**è¨ºæ–·æ–¹æ³•**:
```bash
# æª¢æŸ¥ä½”ç”¨ port çš„ç¨‹åº
lsof -i :8000
lsof -i :3000

# æŸ¥çœ‹ç¨‹åºè©³ç´°ä¿¡æ¯
ps aux | grep python3
ps aux | grep node
```

**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# åœæ­¢ä½”ç”¨ç«¯å£çš„ç¨‹åº
kill <PID>

# æˆ–æ‰¹é‡åœæ­¢ç›¸é—œç¨‹åº
pkill -f "python3 main.py"
pkill -f "npm run dev"
```

## è§£æ±ºæ–¹æ¡ˆå¯¦æ–½

### 1. å‰µå»ºè™›æ“¬ç’°å¢ƒ
```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 2. ä¿®æ”¹å•Ÿå‹•è…³æœ¬
**æª”æ¡ˆ**: `start_dev.sh`

**ä¿®æ”¹å…§å®¹**:
```bash
# æ–°å¢è™›æ“¬ç’°å¢ƒå•Ÿå‹•
echo "ğŸ”§ å•Ÿå‹•è™›æ“¬ç’°å¢ƒ..."
source venv/bin/activate

# ä¿®æ”¹ pip èª¿ç”¨æ–¹å¼
echo "ğŸ“¦ æª¢æŸ¥ Python ä¾è³´..."
pip install -r requirements.txt

# ä¿®æ”¹ Python åŸ·è¡Œå‘½ä»¤
cd backend
python3 main.py &
```

### 3. æ¸…ç†è¡çªé€²ç¨‹
```bash
# æª¢æŸ¥ä¸¦åœæ­¢ä½”ç”¨ç«¯å£çš„ç¨‹åº
lsof -i :8000
kill 13802

lsof -i :3000  
kill 5644
```

## ä¿®å¾©é©—è­‰

### æˆåŠŸå•Ÿå‹•å¾Œçš„ç‹€æ…‹
```bash
ğŸš€ å•Ÿå‹•å°ç£å½©åˆ¸ AI é¸è™Ÿç³»çµ±...
ğŸ”§ å•Ÿå‹•è™›æ“¬ç’°å¢ƒ...
ğŸ“¦ æª¢æŸ¥ Python ä¾è³´...
Requirement already satisfied: requests==2.31.0 in ./venv/lib/python3.13/site-packages
ğŸ”§ å•Ÿå‹• FastAPI å¾Œç«¯æœå‹™ (Port 8000)...
INFO:     Started server process [18999]
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000
ğŸ¨ å•Ÿå‹• Vue.js å‰ç«¯æ‡‰ç”¨ (Port 3000)...
âœ… ç³»çµ±å•Ÿå‹•å®Œæˆï¼

  VITE v4.5.14  ready in 314 ms
  âœ  Local:   http://localhost:3001/
```

### æœå‹™å¯ç”¨æ€§ç¢ºèª
- âœ… **å¾Œç«¯ API**: http://localhost:8000
- âœ… **å‰ç«¯æ‡‰ç”¨**: http://localhost:3001  
- âœ… **API æ–‡æª”**: http://localhost:8000/docs
- âœ… **API è«‹æ±‚æ­£å¸¸**: `INFO: 127.0.0.1:xxx - "GET /api/lotto649/predict HTTP/1.1" 200 OK`

## é™¤éŒ¯æ–¹æ³•ç¸½çµ

### 1. Port ä½”ç”¨å•é¡Œè¨ºæ–·
```bash
# æª¢æŸ¥ç‰¹å®šç«¯å£ä½”ç”¨
lsof -i :8000
lsof -i :3000

# æª¢æŸ¥æ‰€æœ‰ç¶²è·¯é€£æ¥
netstat -tlnp | grep :8000

# æŸ¥çœ‹ç¨‹åºè©³ç´°ä¿¡æ¯
ps aux | grep python3
ps aux | grep node
```

### 2. é€²ç¨‹ç®¡ç†
```bash
# åœæ­¢ç‰¹å®š PID
kill <PID>

# æ‰¹é‡åœæ­¢ç›¸é—œç¨‹åº
pkill -f "python3 main.py"
pkill -f "npm run dev"

# å¼·åˆ¶åœæ­¢
kill -9 <PID>
```

### 3. Python ç’°å¢ƒè¨ºæ–·
```bash
# æª¢æŸ¥ Python å’Œ pip è·¯å¾‘
which python3
which pip
python3 -m pip --version

# æª¢æŸ¥è™›æ“¬ç’°å¢ƒ
source venv/bin/activate
pip list
```

### 4. ç³»çµ±ç‹€æ…‹ç›£æ§
```bash
# æª¢æŸ¥èƒŒæ™¯ç¨‹åº
jobs

# ç›£æ§å³æ™‚æ—¥èªŒ 
tail -f logfile

# æª¢æŸ¥ç³»çµ±è³‡æº
top
htop
```

## æŠ€è¡“æ”¹é€²é»

### 1. è…³æœ¬å¥å£¯æ€§å¢å¼·
- æ·»åŠ ç«¯å£æª¢æŸ¥å’Œè‡ªå‹•æ¸…ç†æ©Ÿåˆ¶
- æ”¹å–„éŒ¯èª¤è™•ç†å’Œæ—¥èªŒè¼¸å‡º
- æ”¯æ´è™›æ“¬ç’°å¢ƒè‡ªå‹•å‰µå»º

### 2. é–‹ç™¼ç’°å¢ƒæ¨™æº–åŒ–
- çµ±ä¸€ä½¿ç”¨è™›æ“¬ç’°å¢ƒç®¡ç†ä¾è³´
- æ¨™æº–åŒ– Python å’Œ pip èª¿ç”¨æ–¹å¼
- æ”¹å–„å¤šäººé–‹ç™¼ç’°å¢ƒä¸€è‡´æ€§

### 3. æ•…éšœæ¢å¾©æ©Ÿåˆ¶
- è‡ªå‹•æª¢æ¸¬å’Œæ¸…ç†è¡çªé€²ç¨‹
- æä¾›æ¸…æ¥šçš„éŒ¯èª¤è¨Šæ¯å’Œè§£æ±ºå»ºè­°

## é é˜²æªæ–½

### 1. é–‹ç™¼ç’°å¢ƒæ–‡æª”
å‰µå»ºè©³ç´°çš„ç’°å¢ƒè¨­ç½®æŒ‡å—ï¼š
```markdown
## ç’°å¢ƒè¦æ±‚
- Python 3.8+
- Node.js 16+
- è™›æ“¬ç’°å¢ƒç®¡ç†

## é¦–æ¬¡è¨­ç½®
1. python3 -m venv venv
2. source venv/bin/activate  
3. pip install -r requirements.txt
4. ./start_dev.sh
```

### 2. è‡ªå‹•åŒ–æª¢æŸ¥è…³æœ¬
å»ºè­°æ·»åŠ ç’°å¢ƒæª¢æŸ¥ï¼š
```bash
#!/bin/bash
# check_env.sh

echo "æª¢æŸ¥ Python ç’°å¢ƒ..."
python3 --version || exit 1

echo "æª¢æŸ¥è™›æ“¬ç’°å¢ƒ..."
if [ ! -d "venv" ]; then
    echo "å‰µå»ºè™›æ“¬ç’°å¢ƒ..."
    python3 -m venv venv
fi

echo "æª¢æŸ¥ç«¯å£ä½”ç”¨..."
if lsof -i :8000 > /dev/null; then
    echo "Port 8000 å·²ä½”ç”¨ï¼Œæ˜¯å¦åœæ­¢ç¾æœ‰ç¨‹åºï¼Ÿ"
fi
```

### 3. å•Ÿå‹•è…³æœ¬æ”¹é€²å»ºè­°
```bash
#!/bin/bash
# æ”¹é€²ç‰ˆ start_dev.sh

# æª¢æŸ¥è™›æ“¬ç’°å¢ƒ
if [ ! -d "venv" ]; then
    echo "ğŸ”§ å‰µå»ºè™›æ“¬ç’°å¢ƒ..."
    python3 -m venv venv
fi

# æª¢æŸ¥ç«¯å£ä¸¦æ¸…ç†
if lsof -i :8000 > /dev/null; then
    echo "ğŸ›‘ æ¸…ç† Port 8000..."
    lsof -ti :8000 | xargs kill -9
fi

# å•Ÿå‹•æœå‹™...
```

## ç›¸é—œæª”æ¡ˆ

### ä¿®æ”¹çš„æª”æ¡ˆ
- `start_dev.sh` - ä¸»è¦ä¿®å¾©æª”æ¡ˆ
  - æ·»åŠ è™›æ“¬ç’°å¢ƒæ”¯æ´
  - ä¿®æ­£ pip èª¿ç”¨æ–¹å¼
  - æ”¹å–„éŒ¯èª¤è™•ç†

### æ–°å¢çš„æª”æ¡ˆ
- `venv/` - è™›æ“¬ç’°å¢ƒç›®éŒ„
- ç›¸é—œçš„ Python å¥—ä»¶å®‰è£

### å½±éŸ¿çš„æœå‹™
- FastAPI å¾Œç«¯æœå‹™ (Port 8000)
- Vue.js å‰ç«¯æœå‹™ (Port 3001) 
- é–‹ç™¼ç’°å¢ƒå•Ÿå‹•æµç¨‹

## SSL æ†‘è­‰é©—è­‰å•é¡Œä¿®å¾©è¨˜éŒ„

## å•é¡Œæè¿°

### ä¸»è¦å•é¡Œ
åœ¨èª¿ç”¨å°ç£å½©åˆ¸å®˜æ–¹ API æ™‚å‡ºç¾ SSL æ†‘è­‰é©—è­‰å¤±æ•—éŒ¯èª¤ï¼Œå°è‡´ç„¡æ³•æ“·å–å½©åˆ¸è³‡æ–™ã€‚

### å•é¡Œç¾è±¡
```bash
è³‡æ–™æ“·å–å¤±æ•—: HTTPSConnectionPool(host='api.taiwanlottery.com', port=443): Max retries exceeded with url: /TLCAPIWeB/Lottery/Lotto649Result?period&month=2025-07&pageSize=31 (Caused by SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: Missing Subject Key Identifier (_ssl.c:1032)')))
```

## å•é¡Œåˆ†æ

### æ ¹æœ¬åŸå› 
å°ç£å½©åˆ¸å®˜æ–¹ API (`api.taiwanlottery.com`) çš„ SSL æ†‘è­‰ç¼ºå°‘ Subject Key Identifier æ“´å±•ï¼Œå°è‡´ Python requests åº«çš„é è¨­ SSL é©—è­‰å¤±æ•—ã€‚

### å•é¡Œä½ç½®
**æª”æ¡ˆ**: `TaiwanLottery/__init__.py` ç¬¬ 15 è¡Œ

**å•é¡Œç¨‹å¼ç¢¼**:
```python
def get_lottery_result(self, url):
    response = requests.get(url)  # âŒ æœªè™•ç† SSL é©—è­‰å•é¡Œ
    return response.json()
```

### éŒ¯èª¤è©³æƒ…
- **éŒ¯èª¤é¡å‹**: `SSLCertVerificationError`
- **å…·é«”åŸå› **: `certificate verify failed: Missing Subject Key Identifier`
- **å½±éŸ¿ç¯„åœ**: æ‰€æœ‰å½©åˆ¸è³‡æ–™æ“·å–åŠŸèƒ½
- **API ç«¯é»**: `https://api.taiwanlottery.com/TLCAPIWeB/Lottery/*`

## è§£æ±ºæ–¹æ¡ˆå¯¦æ–½

### 1. åœç”¨ SSL æ†‘è­‰é©—è­‰
**æª”æ¡ˆ**: `TaiwanLottery/__init__.py`

**ä¿®å¾©ç¨‹å¼ç¢¼**:
```python
def get_lottery_result(self, url):
    response = requests.get(url, verify=False)  # âœ… åœç”¨ SSL é©—è­‰
    return response.json()
```

### 2. é—œé–‰ SSL è­¦å‘Šè¨Šæ¯
ç‚ºé¿å…å¤§é‡çš„ä¸å®‰å…¨è«‹æ±‚è­¦å‘Šï¼Œæ·»åŠ è­¦å‘Šåœç”¨ï¼š

**ä¿®æ”¹å…§å®¹**:
```python
# -*- coding: utf-8 -*-
import logging

import requests
import urllib3  # âœ… æ–°å¢ urllib3 å°å…¥

from TaiwanLottery import utils

# âœ… é—œé–‰ SSL è­¦å‘Š
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)
```

## ä¿®å¾©é©—è­‰

### æ¸¬è©¦å‘½ä»¤
```bash
# æ¸¬è©¦å–®æœˆè³‡æ–™æ“·å–
source venv/bin/activate && python3 -c "
from TaiwanLottery import TaiwanLotteryCrawler
lottery = TaiwanLotteryCrawler()
result = lottery.lotto649(['2024', '12'])
print(f'æ¸¬è©¦çµæœ: æ“·å–åˆ° {len(result) if result else 0} ç­†è³‡æ–™')
"
```

### ä¿®å¾©å‰çµæœ
```bash
SSLError(SSLCertVerificationError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed: Missing Subject Key Identifier (_ssl.c:1032)'))
```

### ä¿®å¾©å¾Œçµæœ  
```bash
æ¸¬è©¦çµæœ: æ“·å–åˆ° 9 ç­†è³‡æ–™
```

### å®Œæ•´åŠŸèƒ½æ¸¬è©¦
```bash
source venv/bin/activate && python3 -c "
from Lottery_predict import get_six_months_lotto649_data
data = get_six_months_lotto649_data()
print(f'ç¸½å…±æ“·å–: {len(data)} ç­†è³‡æ–™') if data else print('ç„¡è³‡æ–™')
"
```

**æ¸¬è©¦çµæœ**:
```bash
é–‹å§‹æ“·å–å¤§æ¨‚é€éå»åŠå¹´çš„ä¸­çè™Ÿç¢¼...
æ­£åœ¨æ“·å– 2025-09 çš„å¤§æ¨‚é€è³‡æ–™...
2025-09 ç„¡è³‡æ–™
æ­£åœ¨æ“·å– 2025-08 çš„å¤§æ¨‚é€è³‡æ–™...
æˆåŠŸæ“·å– 2025-08 å…± 9 ç­†è³‡æ–™
æ­£åœ¨æ“·å– 2025-07 çš„å¤§æ¨‚é€è³‡æ–™...
æˆåŠŸæ“·å– 2025-07 å…± 9 ç­†è³‡æ–™
æ­£åœ¨æ“·å– 2025-06 çš„å¤§æ¨‚é€è³‡æ–™...
æˆåŠŸæ“·å– 2025-06 å…± 8 ç­†è³‡æ–™
æ­£åœ¨æ“·å– 2025-05 çš„å¤§æ¨‚é€è³‡æ–™...
æˆåŠŸæ“·å– 2025-05 å…± 9 ç­†è³‡æ–™
æ­£åœ¨æ“·å– 2025-04 çš„å¤§æ¨‚é€è³‡æ–™...
æˆåŠŸæ“·å– 2025-04 å…± 9 ç­†è³‡æ–™
ç¸½å…±æ“·å–åˆ° 44 ç­†å¤§æ¨‚é€ä¸­çè³‡æ–™

ç¸½å…±æ“·å–: 44 ç­†è³‡æ–™
```

## æŠ€è¡“åˆ†æ

### SSL æ†‘è­‰å•é¡ŒåŸå› 
1. **å®˜æ–¹ API æ†‘è­‰å•é¡Œ**: å°ç£å½©åˆ¸ API çš„ SSL æ†‘è­‰ç¼ºå°‘æ¨™æº–çš„ Subject Key Identifier æ“´å±•
2. **Python requests åš´æ ¼é©—è­‰**: requests åº«é è¨­åŸ·è¡Œå®Œæ•´çš„ SSL/TLS æ†‘è­‰éˆé©—è­‰
3. **å®‰å…¨æ€§èˆ‡å¯ç”¨æ€§å¹³è¡¡**: åœ¨ç„¡æ³•ä¿®æ”¹ç¬¬ä¸‰æ–¹ API æ†‘è­‰çš„æƒ…æ³ä¸‹ï¼Œéœ€è¦åœ¨å®‰å…¨æ€§å’ŒåŠŸèƒ½å¯ç”¨æ€§ä¹‹é–“å–å¾—å¹³è¡¡

### è§£æ±ºæ–¹æ¡ˆè©•ä¼°

#### æ–¹æ¡ˆ 1: åœç”¨ SSL é©—è­‰ (æ¡ç”¨)
**å„ªé»**:
- ç°¡å–®ç›´æ¥ï¼Œç«‹å³è§£æ±ºå•é¡Œ
- ä¸éœ€è¦é¡å¤–é…ç½®
- é©ç”¨æ–¼å¯ä¿¡ä»»çš„å®˜æ–¹ API

**ç¼ºé»**:
- é™ä½é€£æ¥å®‰å…¨æ€§
- å¯èƒ½å—åˆ°ä¸­é–“äººæ”»æ“Š

**é©ç”¨å ´æ™¯**: é€£æ¥å®˜æ–¹å·²çŸ¥å¯ä¿¡ä»»çš„ API ç«¯é»

#### æ–¹æ¡ˆ 2: è‡ªå®šç¾© SSL ä¸Šä¸‹æ–‡ (æœªæ¡ç”¨)
```python
import ssl
import requests

def get_lottery_result(self, url):
    ssl_context = ssl.create_default_context()
    ssl_context.check_hostname = False
    ssl_context.verify_mode = ssl.CERT_NONE
    
    with requests.Session() as session:
        session.verify = ssl_context
        response = session.get(url)
    return response.json()
```

#### æ–¹æ¡ˆ 3: ä½¿ç”¨è‡ªå®šç¾©æ†‘è­‰ (æœªæ¡ç”¨)
éœ€è¦æ‰‹å‹•ä¸‹è¼‰å’Œç®¡ç†ç¬¬ä¸‰æ–¹ API æ†‘è­‰ï¼Œç¶­è­·æˆæœ¬é«˜ã€‚

## å®‰å…¨æ€§è€ƒé‡

### é¢¨éšªè©•ä¼°
- **ä¸­ç­‰é¢¨éšª**: åœç”¨ SSL é©—è­‰æœƒé™ä½é€£æ¥å®‰å…¨æ€§
- **å¯æ¥å—ç†ç”±**: 
  - é€£æ¥çš„æ˜¯å°ç£å½©åˆ¸å®˜æ–¹ APIï¼Œå…·æœ‰ä¸€å®šå¯ä¿¡åº¦
  - æ“·å–çš„æ˜¯å…¬é–‹çš„å½©åˆ¸é–‹çè³‡æ–™ï¼Œéæ•æ„Ÿä¿¡æ¯
  - ç„¡å…¶ä»–å¯è¡Œçš„æŠ€è¡“è§£æ±ºæ–¹æ¡ˆ

### å®‰å…¨å»ºè­°
1. **é™åˆ¶ä½¿ç”¨ç¯„åœ**: åƒ…å°ç‰¹å®šçš„å°ç£å½©åˆ¸ API ç«¯é»åœç”¨é©—è­‰
2. **ç›£æ§ç•°å¸¸**: å®šæœŸæª¢æŸ¥ API å›æ‡‰çš„åˆç†æ€§
3. **æ›´æ–°ç­–ç•¥**: ç•¶å®˜æ–¹ä¿®å¾©æ†‘è­‰å•é¡Œæ™‚ï¼ŒåŠæ™‚æ¢å¾© SSL é©—è­‰

## é é˜²æªæ–½

### 1. ç›£æ§ API ç‹€æ…‹
```python
def get_lottery_result(self, url):
    try:
        # é¦–å…ˆå˜—è©¦æ­£å¸¸çš„ SSL é©—è­‰
        response = requests.get(url, timeout=10)
        return response.json()
    except requests.exceptions.SSLError:
        # SSL éŒ¯èª¤æ™‚æ‰ä½¿ç”¨ç„¡é©—è­‰æ¨¡å¼
        logging.warning(f"SSL verification failed for {url}, using unverified connection")
        response = requests.get(url, verify=False, timeout=10)
        return response.json()
```

### 2. å®šæœŸæª¢æŸ¥æ†‘è­‰ç‹€æ…‹
å»ºè­°å®šæœŸæª¢æŸ¥ API æ†‘è­‰æ˜¯å¦å·²ä¿®å¾©ï¼š
```bash
# æª¢æŸ¥æ†‘è­‰è³‡è¨Š
openssl s_client -connect api.taiwanlottery.com:443 -servername api.taiwanlottery.com
```

### 3. æ—¥èªŒè¨˜éŒ„
æ·»åŠ è©³ç´°çš„éŒ¯èª¤æ—¥èªŒä»¥ä¾¿å•é¡Œè¿½è¹¤ï¼š
```python
import logging

def get_lottery_result(self, url):
    try:
        response = requests.get(url, verify=False)
        logging.info(f"Successfully fetched data from {url}")
        return response.json()
    except Exception as e:
        logging.error(f"Failed to fetch data from {url}: {e}")
        raise
```

## ç›¸é—œæª”æ¡ˆ

### ä¿®æ”¹çš„æª”æ¡ˆ
- `TaiwanLottery/__init__.py` - ä¸»è¦ä¿®å¾©æª”æ¡ˆ
  - ä¿®æ”¹ `get_lottery_result` æ–¹æ³•
  - æ·»åŠ  urllib3 å°å…¥å’Œè­¦å‘Šåœç”¨

### å½±éŸ¿çš„åŠŸèƒ½
- æ‰€æœ‰å½©åˆ¸è³‡æ–™æ“·å–åŠŸèƒ½
- `get_six_months_lotto649_data()` å‡½å¼
- å¾Œç«¯ API å½©åˆ¸è³‡æ–™æŸ¥è©¢
- AI é æ¸¬åŠŸèƒ½çš„è³‡æ–™ä¾†æº

## ç¸½çµ

SSL æ†‘è­‰é©—è­‰å•é¡Œçš„ä¿®å¾©æˆåŠŸæ¢å¾©äº†å°ç£å½©åˆ¸è³‡æ–™æ“·å–åŠŸèƒ½ã€‚é›–ç„¶åœç”¨ SSL é©—è­‰åœ¨æŠ€è¡“ä¸Šé™ä½äº†é€£æ¥å®‰å…¨æ€§ï¼Œä½†è€ƒæ…®åˆ°ï¼š

1. **é€£æ¥ç›®æ¨™å¯ä¿¡ä»»**: å°ç£å½©åˆ¸å®˜æ–¹ API
2. **è³‡æ–™æ€§è³ªå…¬é–‹**: å½©åˆ¸é–‹çè™Ÿç¢¼å±¬æ–¼å…¬é–‹ä¿¡æ¯  
3. **ç„¡å…¶ä»–å¯è¡Œæ–¹æ¡ˆ**: ç„¡æ³•ä¿®æ”¹ç¬¬ä¸‰æ–¹ API çš„æ†‘è­‰é…ç½®
4. **åŠŸèƒ½éœ€æ±‚å„ªå…ˆ**: ç¢ºä¿ç³»çµ±æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸é‹ä½œ

é€™å€‹ä¿®å¾©æ–¹æ¡ˆæ˜¯åˆç†ä¸”å¿…è¦çš„ã€‚å»ºè­°æŒçºŒç›£æ§å®˜æ–¹ API çš„æ†‘è­‰ç‹€æ…‹ï¼Œå¾…å®˜æ–¹ä¿®å¾©æ†‘è­‰å•é¡Œå¾Œï¼ŒåŠæ™‚æ¢å¾©å®Œæ•´çš„ SSL é©—è­‰æ©Ÿåˆ¶ã€‚

**ä¿®å¾©æ™‚é–“**: 2025å¹´9æœˆ1æ—¥  
**å½±éŸ¿ç¯„åœ**: å°ç£å½©åˆ¸è³‡æ–™æ“·å–åŠŸèƒ½
**ä¿®å¾©ç‹€æ…‹**: âœ… å·²å®Œæˆä¸¦é©—è­‰
**é¢¨éšªç­‰ç´š**: ğŸŸ¡ ä¸­ç­‰ï¼ˆå·²è©•ä¼°å¯æ¥å—ï¼‰